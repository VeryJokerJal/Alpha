<MetroWindow
    x:Class="Alpha.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:helpers="clr-namespace:Alpha.Helpers" xmlns:local="clr-namespace:Alpha.ViewModels" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:viewmodels="clr-namespace:Alpha.ViewModels" Title="Auto Alpha" Width="898"
    Height="800" ActiveGlowBrush="#7B61FF" IsShowIcon="False" IsShowTitle="False" mc:Ignorable="d">
    <MetroWindow.LeftWindowCommands>
        <StackPanel Orientation="Horizontal">
            <Image Width="70" Height="40" VerticalAlignment="Center">
                <Image.Source>
                    <DrawingImage>
                        <DrawingImage.Drawing>
                            <DrawingGroup ClipGeometry="M0,0 V32 H110.91 V0 H0 Z">
                                <DrawingGroup Opacity="1">
                                    <DrawingGroup Opacity="1">
                                        <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M110.91,32z M0,0z M41.79,12.21L40.49,12.21 39.8,9.88 39.29,7.92 39.26,7.92 38.74,9.92 38.07,12.23 36.76,12.23 34.81,5.03 36.5,5.03 37,7.14 37.46,9.19 37.49,9.19 38.05,7.14 38.68,5.01 39.86,5.01 40.49,7.13 41.05,9.19 41.1,9.19 41.54,7.14 42.05,5.01 43.74,5.01 41.79,12.21z M50.66,7.74L50.66,9.44C50.66,11.16 49.53,12.25 47.79,12.25 45.89,12.25 44.97,10.94 44.97,9.44L44.97,7.74C44.97,6.25 45.89,4.94 47.79,4.94 49.55,4.94 50.66,6.13 50.66,7.74z M46.6,7.6L46.6,9.55C46.6,10.17 46.98,10.76 47.79,10.76 48.57,10.76 49.02,10.23 49.02,9.55L49.02,7.6C49.02,6.97 48.57,6.43 47.79,6.43 46.97,6.43 46.6,7.01 46.6,7.6z M56.43,12.19L55.28,9.41 54.23,9.41 54.23,12.19 52.61,12.19 52.61,4.99 55.84,4.99C57.12,4.99 58.2,5.77 58.2,7.15 58.2,8.01 57.74,8.75 56.86,9.13L58.26,12.19 56.43,12.19z M55.61,6.41L54.22,6.41 54.22,7.98 55.55,7.98C56.14,7.98 56.52,7.7 56.52,7.16 56.52,6.62 56.16,6.41 55.61,6.41z M60.24,12.19L60.24,4.99 61.86,4.99 61.86,10.76 65.41,10.76 65.41,12.19 60.24,12.19z M70.08,4.99C71.17,4.99 72.11,5.38 72.57,6.32 72.83,6.85 72.85,7.57 72.85,8.46 72.85,9.46 72.83,10.2 72.59,10.76 72.11,11.85 71.08,12.19 69.9,12.19L67.17,12.19 67.17,4.99 70.08,4.99z M68.79,10.76L69.85,10.76C70.93,10.76,71.25,10.15,71.25,9.22L71.25,7.91C71.25,6.92,70.84,6.43,69.82,6.43L68.79,6.43 68.79,10.76z M79.99,12.46L79.14,11.81C78.68,12.1 78.11,12.25 77.45,12.25 75.55,12.25 74.63,10.94 74.63,9.44L74.63,7.74C74.63,6.25 75.55,4.94 77.45,4.94 79.21,4.94 80.32,6.13 80.32,7.74L80.32,9.44C80.32,9.96,80.22,10.41,80.03,10.8L80.88,11.47 79.99,12.46z M76.25,7.6L76.25,9.55C76.25,10.17 76.63,10.76 77.44,10.76 77.54,10.76 77.65,10.75 77.75,10.73L77.02,10.16 77.9,9.12 78.66,9.72C78.66,9.67,78.67,9.62,78.67,9.55L78.67,7.6C78.67,6.97 78.22,6.43 77.44,6.43 76.63,6.43 76.25,7.01 76.25,7.6z M85.05,12.24C83.48,12.24,82.21,11.19,82.21,9.58L82.21,4.99 83.82,4.99 83.82,9.47C83.82,10.29 84.38,10.76 85.06,10.76 85.76,10.76 86.29,10.36 86.29,9.56L86.29,4.99 87.91,4.99 87.91,9.67C87.89,11.22,86.61,12.24,85.05,12.24z M94.49,12.19L93.94,10.72 91.5,10.72 90.95,12.19 89.25,12.19 92.08,4.99 93.35,4.99 96.18,12.19 94.49,12.19z M93.17,8.55L92.74,7.12 92.7,7.12 92.28,8.53 92.01,9.38 93.45,9.38 93.17,8.55z M102.3,12.19L100.44,9.54 99.36,7.82 99.34,7.83 99.34,12.18 97.72,12.18 97.72,4.98 99.16,4.98 100.69,7.18 102.1,9.34 102.12,9.33 102.12,4.99 103.74,4.99 103.74,12.19 102.3,12.19z M108.92,6.42L108.92,12.19 107.31,12.19 107.31,6.42 105.32,6.42 105.32,4.99 110.91,4.99 110.91,6.42 108.92,6.42z" />
                                        <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M110.91,32z M0,0z M41.79,12.21L40.49,12.21 39.8,9.88 39.29,7.92 39.26,7.92 38.74,9.92 38.07,12.23 36.76,12.23 34.81,5.03 36.5,5.03 37,7.14 37.46,9.19 37.49,9.19 38.05,7.14 38.68,5.01 39.86,5.01 40.49,7.13 41.05,9.19 41.1,9.19 41.54,7.14 42.05,5.01 43.74,5.01 41.79,12.21z M50.66,7.74L50.66,9.44C50.66,11.16 49.53,12.25 47.79,12.25 45.89,12.25 44.97,10.94 44.97,9.44L44.97,7.74C44.97,6.25 45.89,4.94 47.79,4.94 49.55,4.94 50.66,6.13 50.66,7.74z M46.6,7.6L46.6,9.55C46.6,10.17 46.98,10.76 47.79,10.76 48.57,10.76 49.02,10.23 49.02,9.55L49.02,7.6C49.02,6.97 48.57,6.43 47.79,6.43 46.97,6.43 46.6,7.01 46.6,7.6z M56.43,12.19L55.28,9.41 54.23,9.41 54.23,12.19 52.61,12.19 52.61,4.99 55.84,4.99C57.12,4.99 58.2,5.77 58.2,7.15 58.2,8.01 57.74,8.75 56.86,9.13L58.26,12.19 56.43,12.19z M55.61,6.41L54.22,6.41 54.22,7.98 55.55,7.98C56.14,7.98 56.52,7.7 56.52,7.16 56.52,6.62 56.16,6.41 55.61,6.41z M60.24,12.19L60.24,4.99 61.86,4.99 61.86,10.76 65.41,10.76 65.41,12.19 60.24,12.19z M70.08,4.99C71.17,4.99 72.11,5.38 72.57,6.32 72.83,6.85 72.85,7.57 72.85,8.46 72.85,9.46 72.83,10.2 72.59,10.76 72.11,11.85 71.08,12.19 69.9,12.19L67.17,12.19 67.17,4.99 70.08,4.99z M68.79,10.76L69.85,10.76C70.93,10.76,71.25,10.15,71.25,9.22L71.25,7.91C71.25,6.92,70.84,6.43,69.82,6.43L68.79,6.43 68.79,10.76z M79.99,12.46L79.14,11.81C78.68,12.1 78.11,12.25 77.45,12.25 75.55,12.25 74.63,10.94 74.63,9.44L74.63,7.74C74.63,6.25 75.55,4.94 77.45,4.94 79.21,4.94 80.32,6.13 80.32,7.74L80.32,9.44C80.32,9.96,80.22,10.41,80.03,10.8L80.88,11.47 79.99,12.46z M76.25,7.6L76.25,9.55C76.25,10.17 76.63,10.76 77.44,10.76 77.54,10.76 77.65,10.75 77.75,10.73L77.02,10.16 77.9,9.12 78.66,9.72C78.66,9.67,78.67,9.62,78.67,9.55L78.67,7.6C78.67,6.97 78.22,6.43 77.44,6.43 76.63,6.43 76.25,7.01 76.25,7.6z M85.05,12.24C83.48,12.24,82.21,11.19,82.21,9.58L82.21,4.99 83.82,4.99 83.82,9.47C83.82,10.29 84.38,10.76 85.06,10.76 85.76,10.76 86.29,10.36 86.29,9.56L86.29,4.99 87.91,4.99 87.91,9.67C87.89,11.22,86.61,12.24,85.05,12.24z M94.49,12.19L93.94,10.72 91.5,10.72 90.95,12.19 89.25,12.19 92.08,4.99 93.35,4.99 96.18,12.19 94.49,12.19z M93.17,8.55L92.74,7.12 92.7,7.12 92.28,8.53 92.01,9.38 93.45,9.38 93.17,8.55z M102.3,12.19L100.44,9.54 99.36,7.82 99.34,7.83 99.34,12.18 97.72,12.18 97.72,4.98 99.16,4.98 100.69,7.18 102.1,9.34 102.12,9.33 102.12,4.99 103.74,4.99 103.74,12.19 102.3,12.19z M108.92,6.42L108.92,12.19 107.31,12.19 107.31,6.42 105.32,6.42 105.32,4.99 110.91,4.99 110.91,6.42 108.92,6.42z M34.9,27.06L34.9,14.43 45.58,14.43C48.49,14.43,49.6,15.47,49.6,17.16L49.6,18.31C49.6,19.53 49,20.12 48.25,20.41 49.03,20.61 49.76,21.07 49.76,22.45L49.76,24.33C49.76,25.76,48.85,27.06,45.61,27.06L34.9,27.06z M46.63,17.5C46.63,16.89,46.34,16.71,45.59,16.71L37.87,16.71 37.87,19.36 45.59,19.36C46.43,19.36,46.63,19.14,46.63,18.45L46.63,17.5z M46.81,22.61C46.81,21.93,46.46,21.66,45.59,21.66L37.87,21.66 37.87,24.76 45.62,24.76C46.42,24.76,46.8,24.51,46.8,23.86L46.8,22.61z M63.88,27.06L61.02,21.45 54.9,21.45 54.9,27.06 51.93,27.06 51.93,14.43 63.07,14.43C66.06,14.43,67.2,15.67,67.2,17.48L67.2,18.39C67.2,19.9,66.47,21.1,64.18,21.4L67.06,27.05 63.88,27.05z M64.23,17.44C64.23,16.94,63.83,16.7,63.08,16.7L54.91,16.7 54.91,19.16 63.08,19.16C63.86,19.16,64.23,19.02,64.23,18.41L64.23,17.44z M83.7,27.06L77.49,17.45 71.16,27.06 67.85,27.06 76.39,14.43 78.57,14.43 87.05,27.06 83.7,27.06z M88.21,27.06L88.21,14.43 91.18,14.43 91.18,27.06 88.21,27.06z M109.46,27.06L96.12,17.86 96.12,27.06 93.54,27.06 93.54,14.43 96.11,14.43 108.32,23.08 108.32,14.43 110.92,14.43 110.92,27.06 109.46,27.06z" />
                                        <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M110.91,32z M0,0z M34.9,27.06L34.9,14.43 45.58,14.43C48.49,14.43,49.6,15.47,49.6,17.16L49.6,18.31C49.6,19.53 49,20.12 48.25,20.41 49.03,20.61 49.76,21.07 49.76,22.45L49.76,24.33C49.76,25.76,48.85,27.06,45.61,27.06L34.9,27.06z M46.63,17.5C46.63,16.89,46.34,16.71,45.59,16.71L37.87,16.71 37.87,19.36 45.59,19.36C46.43,19.36,46.63,19.14,46.63,18.45L46.63,17.5z M46.81,22.61C46.81,21.93,46.46,21.66,45.59,21.66L37.87,21.66 37.87,24.76 45.62,24.76C46.42,24.76,46.8,24.51,46.8,23.86L46.8,22.61z M63.88,27.06L61.02,21.45 54.9,21.45 54.9,27.06 51.93,27.06 51.93,14.43 63.07,14.43C66.06,14.43,67.2,15.67,67.2,17.48L67.2,18.39C67.2,19.9,66.47,21.1,64.18,21.4L67.06,27.05 63.88,27.05z M64.23,17.44C64.23,16.94,63.83,16.7,63.08,16.7L54.91,16.7 54.91,19.16 63.08,19.16C63.86,19.16,64.23,19.02,64.23,18.41L64.23,17.44z M83.7,27.06L77.49,17.45 71.16,27.06 67.85,27.06 76.39,14.43 78.57,14.43 87.05,27.06 83.7,27.06z M88.21,27.06L88.21,14.43 91.18,14.43 91.18,27.06 88.21,27.06z M109.46,27.06L96.12,17.86 96.12,27.06 93.54,27.06 93.54,14.43 96.11,14.43 108.32,23.08 108.32,14.43 110.92,14.43 110.92,27.06 109.46,27.06z" />
                                        <GeometryDrawing Brush="#FF00AFFE" Geometry="F1 M110.91,32z M0,0z M13.11,0L9.37,0.86 5.56,4 5.56,6 3.67,6 1.78,10 2.6,12 0,15.92 1.76,21.95 3.67,22 4.57,26 7.44,28 6.57,30 9.32,32 13.09,32 15,28.03 15,2.08 13.11,0z M10.49,11L13.06,12.03 13.06,14.89 7.57,11.74 10.49,11z M13.06,24.78L10.26,26.17 13.06,18.77 13.06,24.78z M11.6,9.35L11.6,5.35 13.06,3.17 13.06,9.93 11.6,9.35z M5.56,7.94L7.5,7.94 7.5,4.92 10.25,2.65 11.22,2.43 9.66,4.77 9.66,9.2 5.75,10.19 4.14,9.56 4.9,7.94 5.56,7.94z M4.22,13.08L4.71,12.34 10.29,15.54 2.34,17.01 2.12,16.24 4.22,13.08z M6.3,24.84L5.56,21.58 5.24,20.1 3.73,20.06 3.23,20.04 2.89,18.88 11.55,17.28 8.19,26.15 6.3,24.84z M11.88,30.06L9.97,30.06 8.99,29.35 9.19,28.88 13.06,26.95 13.06,27.59 11.88,30.06z M18.89,0L22.63,0.86 26.44,4 26.44,6 28.33,6 30.22,10 29.4,12 32,15.92 30.24,21.95 28.33,22 27.43,26 24.56,28 25.43,30 22.68,32 18.91,32 17,28.03 17,2.08 18.89,0z M21.51,11L18.94,12.03 18.94,14.89 24.43,11.74 21.51,11z M18.94,24.78L21.74,26.17 18.94,18.77 18.94,24.78z M20.4,9.35L20.4,5.35 18.94,3.17 18.94,9.93 20.4,9.35z M26.44,7.94L24.5,7.94 24.5,4.92 21.75,2.65 20.78,2.43 22.34,4.77 22.34,9.2 26.25,10.19 27.86,9.56 27.1,7.94 26.44,7.94z M27.78,13.08L27.29,12.34 21.71,15.54 29.66,17.01 29.88,16.24 27.78,13.08z M25.7,24.84L26.44,21.58 26.77,20.11 28.28,20.07 28.78,20.05 29.12,18.89 20.46,17.29 23.82,26.16 25.7,24.84z M20.12,30.06L22.04,30.06 23.02,29.35 22.82,28.88 18.95,26.95 18.95,27.59 20.12,30.06z" />
                                    </DrawingGroup>
                                </DrawingGroup>
                            </DrawingGroup>
                        </DrawingImage.Drawing>
                    </DrawingImage>
                </Image.Source>
            </Image>
            <TextBlock Margin="12,0,0,0" VerticalAlignment="Center" FontSize="12" Text="AUTO" />
        </StackPanel>
    </MetroWindow.LeftWindowCommands>
    <MetroWindow.DataContext>
        <viewmodels:MainViewModel />
    </MetroWindow.DataContext>

    <MetroWindow.Resources>
        <!--  ListBoxItem样式  -->
        <Style x:Key="ModernListBoxItem" TargetType="ListBoxItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Grid>
                            <Border x:Name="Border" Height="30" Margin="10,2" Background="Transparent" BorderThickness="0" CornerRadius="8">
                                <Grid>
                                    <Border x:Name="SelectedBorder" Background="#7B61FF" CornerRadius="8" Opacity="0" />

                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Orientation="Horizontal">
                                        <!--<Path x:Name="Icon" Width="24" Height="24" Margin="0,0,0,8" Data="{Binding IconData}" Fill="#A0A0A0" Stretch="Uniform" />-->
                                        <TextBlock x:Name="HeaderText" HorizontalAlignment="Center" FontSize="12" Foreground="#A0A0A0" Text="{Binding Title}" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <!--<Setter TargetName="Icon" Property="Fill" Value="#7B61FF" />-->
                                <Setter TargetName="HeaderText" Property="Foreground" Value="#7B61FF" />
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="8" Opacity="0.3" ShadowDepth="0" />
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <!--<Setter TargetName="Icon" Property="Fill" Value="#7B61FF" />-->
                                <Setter TargetName="HeaderText" Property="Foreground" Value="#7B61FF" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--  ListBox样式  -->
        <Style x:Key="ModernListBox" TargetType="ListBox">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBox">
                        <Border Grid.Column="0" Background="#252525" BorderBrush="#333333" BorderThickness="0,0,1,0">
                            <ScrollViewer Margin="0" Padding="0">
                                <ItemsPresenter Margin="0,20,0,0" />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </MetroWindow.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border Grid.Row="0" Margin="5" Padding="10" CornerRadius="10" DataContext="{Binding Competition}" Visibility="{Binding DataContext.Competition, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource NullToVisibilityConverter}}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  顶部信息  -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  左侧：比赛信息  -->
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <TextBlock FontSize="24" FontWeight="SemiBold" Foreground="#FFEAEAEA" Text="{Binding Leaderboard.User}" />
                        <Border Margin="12,0,0,0" Padding="8,4" VerticalAlignment="Center" Background="{Binding Leaderboard.Level, Converter={StaticResource LevelColorConverter}}" CornerRadius="5">
                            <TextBlock FontSize="12" Foreground="Black" Text="{Binding Leaderboard.Level}" />
                        </Border>
                    </StackPanel>

                    <!--  右侧：排名信息  -->
                    <StackPanel Grid.Column="2" VerticalAlignment="Center" Orientation="Horizontal">
                        <StackPanel Margin="0,0,24,0">
                            <TextBlock FontSize="12" Foreground="#FF808080" Text="排名" />
                            <TextBlock FontSize="20" FontWeight="Bold" Foreground="#FFEAEAEA" Text="{Binding Leaderboard.Rank}" />
                        </StackPanel>
                        <StackPanel Margin="0,0,24,0">
                            <TextBlock FontSize="12" Foreground="#FF808080" Text="分数" />
                            <TextBlock FontSize="20" FontWeight="Bold" Foreground="#FFEAEAEA" Text="{Binding Leaderboard.Score, StringFormat=N0}" />
                        </StackPanel>
                        <StackPanel>
                            <TextBlock FontSize="12" Foreground="#FF808080" Text="Alpha 数量" />
                            <TextBlock FontSize="20" FontWeight="Bold" Foreground="#FFEAEAEA" Text="{Binding Leaderboard.Alphas}" />
                        </StackPanel>
                    </StackPanel>
                </Grid>

                <!--  进度条  -->
                <Grid Grid.Row="1" Margin="0,20,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!--  进度标签  -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBlock FontSize="12" Foreground="#FF808080" Text="{Binding Progress.Score.Bottom, StringFormat=N0}" />
                        <StackPanel Grid.Column="1" HorizontalAlignment="Center" Orientation="Horizontal">
                            <TextBlock FontSize="14" FontWeight="SemiBold" Foreground="{Binding Leaderboard.Level, Converter={StaticResource LevelColorConverter}}" Text="{Binding Leaderboard.Level}" />
                            <TextBlock Margin="5,0" FontSize="14" Foreground="#FF808080" Text="→" />
                            <TextBlock FontSize="14" FontWeight="SemiBold" Foreground="{Binding Progress.Level, Converter={StaticResource LevelColorConverter}}" Text="{Binding Progress.Level}" />
                        </StackPanel>
                        <TextBlock Grid.Column="2" FontSize="12" Foreground="#FF808080" Text="{Binding Progress.Score.Top, StringFormat=N0}" />
                    </Grid>

                    <!--  进度条  -->
                    <Grid Grid.Row="1" Height="6" Margin="0,8,0,0">
                        <Border Background="#FF404040" CornerRadius="3" />
                        <Border HorizontalAlignment="Left" Background="{Binding Progress.Level, Converter={StaticResource LevelColorConverter}}" CornerRadius="3">
                            <Border.Width>
                                <MultiBinding Converter="{StaticResource ProgressConverter}">
                                    <Binding Path="Progress.Score.Bottom" />
                                    <Binding Path="Progress.Score.Top" />
                                    <Binding Path="Leaderboard.Score" />
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=Grid}" />
                                </MultiBinding>
                            </Border.Width>
                        </Border>
                    </Grid>
                </Grid>
            </Grid>
        </Border>
        <TabControl Grid.Row="1">
            <TabItem Padding="20,10" Header="提交">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="回测模式" />
                                <TextBlock Margin="5,0,0,0" Opacity="0.4" Text="（此模式会根据软件的策略算法来进行回测）" Visibility="{Binding BackTestModeIndex, Converter={StaticResource UniversalComparisonConverter}, ConverterParameter=0}" />
                                <TextBlock Margin="5,0,0,0" Opacity="0.4" Text="（此模式会使用原始功能，不会额外添加任何指令以及策略，也就是官网的回测）" Visibility="{Binding BackTestModeIndex, Converter={StaticResource UniversalComparisonConverter}, ConverterParameter=1}" />
                                <TextBlock Margin="5,0,0,0" Opacity="0.4" Text="（此模式会根据您输入的指令来进行回测，会产生额外的策略。例如：group_neutralize(ts_av_diff($1, y), z)，之后会对$1进行替换成x）" Visibility="{Binding BackTestModeIndex, Converter={StaticResource UniversalComparisonConverter}, ConverterParameter=2}" />
                            </StackPanel>
                            <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="{Binding BackTestModeIndex}">
                                <ComboBoxItem Content="默认" />
                                <ComboBoxItem Content="原始" />
                                <ComboBoxItem Content="指令" />
                            </ComboBox>
                            <DockPanel Margin="0,5,0,0">
                                <Button Margin="5,0,0,0" Command="{Binding PauseBackTestCommand}" Content="{Binding PauseBackTestButtonText}" DockPanel.Dock="Right" Visibility="{Binding HasBackTestStarted, Converter={StaticResource UniversalComparisonConverter}}" />
                                <Button Command="{Binding BackTestCommand}" Content="{Binding BackTestButtonText}" />
                            </DockPanel>
                        </StackPanel>

                        <Grid Grid.Row="1" Margin="0,10,0,0" Visibility="{Binding BackTestModeIndex, Converter={StaticResource InverseUniversalComparisonConverter}, ConverterParameter=0}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" MinHeight="200" />
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Foreground="#A0A0A0" Text="编程" />
                            <TextBox Grid.Row="1" Margin="0,5,0,0" VerticalAlignment="Stretch" VerticalContentAlignment="Top" AcceptsReturn="True" Text="{Binding Code}" />
                        </Grid>
                    </Grid>
                    <TextBlock Grid.Row="1" Margin="0,10,0,5" HorizontalAlignment="Left" VerticalAlignment="Center" Foreground="#A0A0A0" Text="{Binding TestSummary}" />
                    <StackPanel Grid.Row="2" Margin="0,5" Orientation="Horizontal">
                        <CheckBox Content="忽略警告" IsChecked="{Binding IgnoreWarnings}" />
                        <CheckBox Margin="10,0,0,0" Content="忽略错误" IsChecked="{Binding IgnoreErrors}" />
                        <CheckBox Margin="10,0,0,0" Content="忽略未通过" IsChecked="{Binding IgnoreStop}" />
                        <CheckBox Margin="10,0,0,0" Content="忽略已通过" IsChecked="{Binding IgnorePasses}" />
                        <CheckBox Margin="10,0,0,0" Content="忽略已完成" IsChecked="{Binding IgnoreCompleted}" />
                        <CheckBox Margin="10,0,0,0" Content="忽略失败" IsChecked="{Binding IgnoreFailures}" />
                    </StackPanel>
                    <StackPanel Grid.Row="3" Margin="0,5" Orientation="Horizontal">
                        <CheckBox Content="自动提交" IsChecked="{Binding AutoSubmit}" />
                    </StackPanel>
                    <Border Grid.Row="4" Background="#FF292929" BorderBrush="#FF464646" BorderThickness="1" CornerRadius="5">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <ItemsControl ItemsSource="{Binding SimulationCompletedDatas}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Width="300" Margin="8" Padding="16" Background="#2D2D2D" BorderBrush="#404040" BorderThickness="1" CornerRadius="8">
                                            <Border.Visibility>
                                                <MultiBinding Converter="{StaticResource IgnoreStatusVisibilityMultiConverter}">
                                                    <Binding Path="DataContext.CurrentStatus" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}" />
                                                    <Binding />
                                                </MultiBinding>
                                            </Border.Visibility>
                                            <Grid>
                                                <StackPanel>
                                                    <!--  头部  -->
                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>

                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock FontSize="18" FontWeight="SemiBold" Foreground="#FFFFFF" Text="{Binding Type}" />
                                                            <TextBlock Margin="8,0,0,0" VerticalAlignment="Center" FontSize="12" Foreground="Gray" Text="{Binding Time}" />
                                                        </StackPanel>

                                                        <Border Grid.Column="1" Padding="8,4" Background="{Binding Status, Converter={StaticResource StatusToIconConverter}}" CornerRadius="4">
                                                            <TextBlock FontSize="12" Foreground="#FFFFFF" Text="{Binding Status}" />
                                                        </Border>
                                                    </Grid>

                                                    <!--  分隔线  -->
                                                    <Rectangle Height="1" Margin="0,0,0,12" Fill="#404040" />

                                                    <!--  基本信息  -->
                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto" />
                                                            <ColumnDefinition Width="*" />
                                                        </Grid.ColumnDefinitions>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>

                                                        <TextBlock Margin="0,0,8,0" FontSize="12" Foreground="#B0B0B0" Text="Regular:" />
                                                        <TextBlock Grid.Column="1" FontSize="14" Foreground="#E0E0E0" Text="{Binding Regular}" TextWrapping="WrapWithOverflow" />

                                                        <TextBlock Grid.Row="1" Margin="0,8,8,0" FontSize="12" Foreground="#B0B0B0" Text="Alpha:" />
                                                        <TextBlock Grid.Row="1" Grid.Column="1" Margin="0,8,0,0" FontSize="14" Foreground="#E0E0E0" Text="{Binding Alpha}" TextWrapping="WrapWithOverflow" />

                                                        <Label Grid.Row="2" Margin="0,8,0,0" Padding="0" FontSize="14" Foreground="#E0E0E0" Visibility="{Binding AlphaResult, Converter={StaticResource UniversalComparisonConverter}}">
                                                            <Hyperlink Command="{Binding DataContext.ViewAlphaDetailsCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}}" CommandParameter="{Binding AlphaResult}" Foreground="LightGoldenrodYellow">查看更多</Hyperlink>
                                                        </Label>
                                                    </Grid>

                                                    <!--  设置部分  -->
                                                    <Expander Margin="0,8,0,0" Background="Transparent" BorderThickness="0" Header="Settings">
                                                        <Expander.HeaderTemplate>
                                                            <DataTemplate>
                                                                <TextBlock FontSize="14" FontWeight="SemiBold" Foreground="#E0E0E0" Text="{Binding}" />
                                                            </DataTemplate>
                                                        </Expander.HeaderTemplate>
                                                        <Grid Margin="8,12,8,8">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="150" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>

                                                            <!--  设置项  -->
                                                            <TextBlock Margin="0,0,8,0" FontSize="12" Foreground="#B0B0B0" Text="Instrument Type:" />
                                                            <TextBlock Grid.Column="1" FontSize="14" Foreground="#E0E0E0" Text="{Binding Settings.InstrumentType}" />

                                                            <TextBlock Grid.Row="1" Margin="0,8,8,0" FontSize="12" Foreground="#B0B0B0" Text="Region:" />
                                                            <TextBlock Grid.Row="1" Grid.Column="1" Margin="0,8,0,0" FontSize="14" Foreground="#E0E0E0" Text="{Binding Settings.Region}" />

                                                            <TextBlock Grid.Row="2" Margin="0,8,8,0" FontSize="12" Foreground="#B0B0B0" Text="Universe:" />
                                                            <TextBlock Grid.Row="2" Grid.Column="1" Margin="0,8,0,0" FontSize="14" Foreground="#E0E0E0" Text="{Binding Settings.Universe}" />

                                                            <TextBlock Grid.Row="3" Margin="0,8,8,0" FontSize="12" Foreground="#B0B0B0" Text="Delay:" />
                                                            <TextBlock Grid.Row="3" Grid.Column="1" Margin="0,8,0,0" FontSize="14" Foreground="#E0E0E0" Text="{Binding Settings.Delay}" />

                                                            <TextBlock Grid.Row="4" Margin="0,8,8,0" FontSize="12" Foreground="#B0B0B0" Text="Neutralization:" />
                                                            <TextBlock Grid.Row="4" Grid.Column="1" Margin="0,8,0,0" FontSize="14" Foreground="#E0E0E0" Text="{Binding Settings.Neutralization}" />

                                                            <TextBlock Grid.Row="5" Margin="0,8,8,0" FontSize="12" Foreground="#B0B0B0" Text="Language:" />
                                                            <TextBlock Grid.Row="5" Grid.Column="1" Margin="0,8,0,0" FontSize="14" Foreground="#E0E0E0" Text="{Binding Settings.Language}" />
                                                        </Grid>
                                                    </Expander>
                                                </StackPanel>
                                                <Border Padding="10" HorizontalAlignment="Right" VerticalAlignment="Bottom" BorderBrush="{Binding AlphaResult, Converter={StaticResource AlphaResultToColorConverter}}" BorderThickness="1" CornerRadius="4">
                                                    <TextBlock FontSize="12" Foreground="{Binding AlphaResult, Converter={StaticResource AlphaResultToColorConverter}}" Text="{Binding AlphaResult, Converter={StaticResource AlphaResultToTextConverter}}" />
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </TabItem>

            <TabItem Padding="20,10" Header="知识库">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <ProgressBar Grid.Row="0" IsIndeterminate="true" Visibility="{Binding IsKnowledgeLoading, Converter={StaticResource UniversalComparisonConverter}}" />

                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.4*" MinWidth="120" />
                            <ColumnDefinition Width="5" />
                            <ColumnDefinition Width="*" MinWidth="120" />
                        </Grid.ColumnDefinitions>
                        <ListBox Grid.Column="0" DisplayMemberPath="Title" ItemContainerStyle="{StaticResource ModernListBoxItem}" ItemsSource="{Binding KnowledgeList}" SelectedItem="{Binding SelectedKnowledge}" Style="{StaticResource ModernListBox}" />
                        <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" />
                        <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                            <ItemsControl ItemsSource="{Binding SelectedKnowledge.Fields}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Margin="8" Background="#252525" CornerRadius="12">
                                            <Grid Margin="16">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <!--  头部信息  -->
                                                <Grid Grid.Row="0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock FontSize="18" FontWeight="SemiBold" Foreground="#FFFFFF" Text="{Binding Id}" />
                                                        <TextBlock Margin="0,4,0,0" FontSize="12" Foreground="#A0A0A0" Text="{Binding Dataset.Name}" />
                                                    </StackPanel>

                                                    <Border Grid.Column="1" Padding="8" Background="#7B61FF" CornerRadius="5">
                                                        <TextBlock VerticalAlignment="Center" FontSize="12" Foreground="#FFFFFF" Text="{Binding Type}" />
                                                    </Border>
                                                </Grid>

                                                <!--  描述  -->
                                                <TextBlock Grid.Row="1" Margin="0,12,0,0" Foreground="#E0E0E0" Text="{Binding Description}" TextWrapping="Wrap" />

                                                <!--  统计信息  -->
                                                <UniformGrid Grid.Row="2" Margin="0,16,0,0" Columns="3">
                                                    <StackPanel Margin="0,0,8,0">
                                                        <TextBlock FontSize="12" Foreground="#A0A0A0" Text="Coverage" />
                                                        <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                                                            <TextBlock FontSize="16" FontWeight="SemiBold" Foreground="#FFFFFF" Text="{Binding Coverage, StringFormat={}{0:P1}}" />
                                                        </StackPanel>
                                                        <ProgressBar Margin="0,4,0,0" Maximum="1" Value="{Binding Coverage}" />
                                                    </StackPanel>

                                                    <StackPanel Margin="8,0">
                                                        <TextBlock FontSize="12" Foreground="#A0A0A0" Text="Users" />
                                                        <TextBlock Margin="0,4,0,0" FontSize="16" FontWeight="SemiBold" Foreground="#FFFFFF" Text="{Binding UserCount}" />
                                                    </StackPanel>

                                                    <StackPanel Margin="8,0,0,0">
                                                        <TextBlock FontSize="12" Foreground="#A0A0A0" Text="Alpha" />
                                                        <TextBlock Margin="0,4,0,0" FontSize="16" FontWeight="SemiBold" Foreground="#FFFFFF" Text="{Binding AlphaCount}" />
                                                    </StackPanel>
                                                </UniformGrid>

                                                <!--  分类信息  -->
                                                <StackPanel Grid.Row="3" Margin="0,16,0,0" Orientation="Horizontal">
                                                    <Border Margin="0,0,8,0" Padding="8,4" Background="#333333" CornerRadius="5">
                                                        <TextBlock FontSize="12" Foreground="#FFFFFF" Text="{Binding Category.Name}" />
                                                    </Border>
                                                    <Border Padding="8,4" Background="#333333" CornerRadius="5">
                                                        <TextBlock FontSize="12" Foreground="#FFFFFF" Text="{Binding Subcategory.Name}" />
                                                    </Border>
                                                </StackPanel>

                                                <!--  底部信息  -->
                                                <StackPanel Grid.Row="4" Margin="0,16,0,0" Orientation="Horizontal">
                                                    <TextBlock FontSize="12" Foreground="#A0A0A0" Text="{Binding Region}" />
                                                    <TextBlock FontSize="12" Foreground="#A0A0A0" Text=" • " />
                                                    <TextBlock FontSize="12" Foreground="#A0A0A0" Text="{Binding Universe}" />
                                                    <TextBlock FontSize="12" Foreground="#A0A0A0" Text=" • " />
                                                    <TextBlock FontSize="12" Foreground="#A0A0A0" Text="{Binding Delay, StringFormat={}Delay: {0}}" />
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </TabItem>

            <TabItem Header="登录与设置">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal">
                            <StackPanel>
                                <TextBlock Margin="0,0,0,5" VerticalAlignment="Center" Text="邮箱" />
                                <TextBox Width="200" Margin="0,0,0,5" Padding="5" VerticalAlignment="Stretch" Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" />
                                <TextBlock Margin="0,0,0,5" VerticalAlignment="Center" Text="密码" />
                                <PasswordBox Width="200" Padding="5" VerticalAlignment="Stretch" helpers:PasswordBoxHelper.BindPassword="True" helpers:PasswordBoxHelper.BoundPassword="{Binding Password, Mode=TwoWay}" />
                            </StackPanel>
                            <Button Margin="10,0,0,0" Padding="20,5" VerticalAlignment="Bottom" Command="{Binding LoginCommand}" Content="登录" />
                            <Button Margin="10,0,0,0" Padding="20,5" VerticalAlignment="Bottom" Command="{Binding GetKnowledgeCommand}" Content="获取知识库" />
                        </StackPanel>
                        <Grid Grid.Row="1" Margin="0,20">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="编程语言" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.ProgrammingLanguage}">
                                    <ComboBoxItem Content="Fast Expression" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="1" Margin="10,0,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="资产类别" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.AssetClass}">
                                    <ComboBoxItem Content="Equity" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="2" Margin="10,0,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="地区" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.Region}">
                                    <ComboBoxItem Content="USA" />
                                    <ComboBoxItem Content="CHN" />
                                    <ComboBoxItem Content="TWN" />
                                    <ComboBoxItem Content="ASI" />
                                    <ComboBoxItem Content="HKG" />
                                    <ComboBoxItem Content="KOR" />
                                    <ComboBoxItem Content="EUR" />
                                    <ComboBoxItem Content="GLB" />
                                    <ComboBoxItem Content="AMR" />
                                    <ComboBoxItem Content="JPN" />
                                </ComboBox>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="流动性" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.Liquidity}">
                                    <ComboBoxItem Content="TOP3000" />
                                    <ComboBoxItem Content="TOP1000" />
                                    <ComboBoxItem Content="TOP500" />
                                    <ComboBoxItem Content="TOP200" />
                                    <ComboBoxItem Content="TOPSP500" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="决策延迟" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.DecisionDelay}">
                                    <ComboBoxItem Content="1" />
                                    <ComboBoxItem Content="0" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="2" Margin="10,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="Alpha 权重" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.AlphaWeight}">
                                    <ComboBoxItem Content="None" />
                                    <ComboBoxItem Content="Market" />
                                    <ComboBoxItem Content="Sector" />
                                    <ComboBoxItem Content="Industry" />
                                    <ComboBoxItem Content="Subindustry" />
                                </ComboBox>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="清洗数据" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.DataCleaning}">
                                    <ComboBoxItem Content="On" />
                                    <ComboBoxItem Content="Off" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="1" Margin="10,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="抛出警告" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.WarningThrowing}">
                                    <ComboBoxItem Content="Verify" />
                                </ComboBox>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="2" Margin="10,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="处理缺失值" />
                                <ComboBox Margin="0,5,0,0" Padding="5" HorizontalAlignment="Stretch" SelectedIndex="0" Text="{Binding SimulationSettings.MissingValueHandling}">
                                    <ComboBoxItem Content="On" />
                                    <ComboBoxItem Content="Off" />
                                </ComboBox>
                            </StackPanel>

                            <StackPanel Grid.Row="3" Grid.Column="0" Margin="0,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="线性递减加权平均" />
                                <TextBox Margin="0,5,0,0" Padding="5" VerticalAlignment="Stretch" Text="{Binding SimulationSettings.LinearDecayWeightedAverage}" />
                            </StackPanel>
                            <StackPanel Grid.Row="3" Grid.Column="1" Margin="10,5,0,0">
                                <TextBlock FontSize="12" Foreground="#A0A0A0" Text="截断权重" />
                                <TextBox Margin="0,5,0,0" Padding="5" VerticalAlignment="Stretch" Text="{Binding SimulationSettings.TruncationWeight}" />
                            </StackPanel>
                            <StackPanel Grid.Row="3" Grid.Column="2" Margin="10,5,0,0">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" FontSize="12" Foreground="#A0A0A0" Text="时间评估" />
                                    <DockPanel Grid.Row="1" Grid.Column="0">
                                        <TextBlock Margin="5,5,0,0" VerticalAlignment="Center" DockPanel.Dock="Right" Text="年" />
                                        <TextBox Margin="0,5,0,0" Padding="5" VerticalAlignment="Stretch" Text="{Binding SimulationSettings.TimeEvaluationYear}" />
                                    </DockPanel>
                                    <DockPanel Grid.Row="1" Grid.Column="1" Margin="5,0,0,0">
                                        <TextBlock Margin="5,5,0,0" VerticalAlignment="Center" DockPanel.Dock="Right" Text="月" />
                                        <TextBox Margin="0,5,0,0" Padding="5" VerticalAlignment="Stretch" Text="{Binding SimulationSettings.TimeEvaluationMonth}" />
                                    </DockPanel>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</MetroWindow>
